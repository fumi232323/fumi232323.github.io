<!DOCTYPE html>
<html lang="ja-JP">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>ssh config/32imuf.com</title>
    <link rel="shortcut icon" href="/static/icons/favicon.ico">
    <link href="https://fonts.googleapis.com/css?family=Griffy" rel="stylesheet">
    <link href="https://fonts.googleapis.com/earlyaccess/sawarabimincho.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/css/reset.css">
    <link rel="stylesheet" href="/static/css/style.css?20180821">
    
  <link rel="stylesheet" href="/static/css/article.css?20180923">
  <link rel="stylesheet" href="/static/css/monokai.css">

  </head>

  <body>
    <div class="container">
      <div class="header"><header class="item item-header">
  <h1>
    <a href="/">
      <img class="logo" src="/static/images/inuu.png" alt="犬">
    </a>
  </h1>
  <nav class="nav">
    <ul>
      <li class="nav-category"><a href="/">HOME</a></li>
      
      
        
        <li class="nav-category">
          <a href="/index_category_category_aws.html">aws</a>
          <ul>
            
              <li class="nav-article">
                <a href="../../aws/s3-response-error/">S3ResponseError の原因はなんと時刻ずれだった</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="nav-category">
          <a href="/index_category_category_blog.html">blog</a>
          <ul>
            
              <li class="nav-article">
                <a href="../../blog/rules/">ブログを書くときの注意点</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="nav-category">
          <a href="/index_category_category_css.html">css</a>
          <ul>
            
              <li class="nav-article">
                <a href="../../html-css/css/note/">CSS のメモ</a>
              </li>
            
              <li class="nav-article">
                <a href="../../html-css/html5-css3-modern-coding/">『HTML5/CSS3モダンコーディング フロントエンドエンジニアが教える3つの本格レイアウト スタンダード・グリッド・シングルページレイアウトの作り方』を読んで気になったことメモ</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="nav-category">
          <a href="/index_category_category_django.html">django</a>
          <ul>
            
              <li class="nav-article">
                <a href="../../django/django_orm/">Django ORM のメモ</a>
              </li>
            
              <li class="nav-article">
                <a href="../../django/note/">Django のメモ</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="nav-category">
          <a href="/index_category_category_git.html">git</a>
          <ul>
            
              <li class="nav-article">
                <a href="../../git/command/rebase-i/">git rebase -i</a>
              </li>
            
              <li class="nav-article">
                <a href="../../git/command/rebase/">git rebase</a>
              </li>
            
              <li class="nav-article">
                <a href="../../git/note/">Git のメモ</a>
              </li>
            
              <li class="nav-article">
                <a href="../../git/configuration/">Git の設定まとめ</a>
              </li>
            
              <li class="nav-article">
                <a href="../../git/command/">Git のコマンドまとめ</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="nav-category">
          <a href="/index_category_category_github.html">github</a>
          <ul>
            
              <li class="nav-article">
                <a href="../../github/how-to-create-new-repository/">GitHub に新しいリポジトリを作成して、pushする</a>
              </li>
            
              <li class="nav-article">
                <a href="../../github/github-pages-custom-domain-setting/">GitHub Pages にカスタムドメインを設定する</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="nav-category">
          <a href="/index_category_category_mac.html">mac</a>
          <ul>
            
              <li class="nav-article">
                <a href="../../mac/note/">Mac のメモ</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="nav-category">
          <a href="/index_category_category_miyadaiku.html">miyadaiku</a>
          <ul>
            
              <li class="nav-article">
                <a href="../../miyadaiku/build/">Miyadaiku ビルドするときのコマンド</a>
              </li>
            
              <li class="nav-article">
                <a href="../../miyadaiku/article-directory-structure/">article の置きかた</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="nav-category">
          <a href="/index_category_category_pycharm.html">pycharm</a>
          <ul>
            
              <li class="nav-article">
                <a href="../../pycharm/django-support/">Pycharm の Django support を使う</a>
              </li>
            
              <li class="nav-article">
                <a href="../../pycharm/add-psql-var-to-user-params-for-db-console/">PyCharm の Database Console で PostgreSQL のプレースホルダー (インタポレーション) を SQL パラメーターとして使えるようにする</a>
              </li>
            
              <li class="nav-article">
                <a href="../../pycharm/connect-db-using-ssh-tunnel/">PyCharm で SSH tunnel して Amazon Redshift につなぐ</a>
              </li>
            
              <li class="nav-article">
                <a href="../../pycharm/useful-menu-and-shortcuts/">PyCharm ショートカットと便利メニュー</a>
              </li>
            
              <li class="nav-article">
                <a href="../../pycharm/configuration/">PyCharm の設定</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="nav-category">
          <a href="/index_category_category_python.html">python</a>
          <ul>
            
              <li class="nav-article">
                <a href="../../python/note/">Python のメモ</a>
              </li>
            
              <li class="nav-article">
                <a href="../../python/etc/">Python いろいろメモ</a>
              </li>
            
              <li class="nav-article">
                <a href="../../python/pyconjp2018/">PyConJP 2018 で聞いた講演</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="nav-category">
          <a href="/index_category_category_redshift.html">redshift</a>
          <ul>
            
              <li class="nav-article">
                <a href="../../redshift/note/">Redshift のメモ</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="nav-category">
          <a href="/index_category_category_sample.html">sample</a>
          <ul>
            
              <li class="nav-article">
                <a href="../../2018/sample-h1-h2-h3-li/">h1, h2, h3, リストの sample</a>
              </li>
            
              <li class="nav-article">
                <a href="../../2018/sample-code-block/">code-block, 引用の sample</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="nav-category">
          <a href="/index_category_category_sql.html">sql</a>
          <ul>
            
              <li class="nav-article">
                <a href="../../sql/note/">SQL のメモ</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="nav-category">
          <a href="/index_category_category_ssh.html">ssh</a>
          <ul>
            
              <li class="nav-article">
                <a href="../command/ssh-keygen/">ssh-keygen</a>
              </li>
            
              <li class="nav-article">
                <a href="../command/ssh-add">ssh-add</a>
              </li>
            
              <li class="nav-article">
                <a href="../command/ssh">ssh のメモ</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="nav-category">
          <a href="/index_category_category_test.html">test</a>
          <ul>
            
              <li class="nav-article">
                <a href="../../python-test/note/">Python テストのメモ</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="nav-category">
          <a href="/index_category_category_vagrant.html">vagrant</a>
          <ul>
            
              <li class="nav-article">
                <a href="../../vagrant/note/">Vagrant のメモ</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="nav-category">
          <a href="/index_category_category_vim.html">vim</a>
          <ul>
            
              <li class="nav-article">
                <a href="../../vim/command/">Vim のコマンド</a>
              </li>
            
          </ul>
        </li>
      
    </ul>
  </nav>
</header></div>
      <div class="main">
  <main class="item item-article item-ssh">
    <time class="date" datetime="2018-10-14 00:00:00+09:00">
      2018-10-14 Sun
    </time>
    <div class="title">ssh config</div>
    <div class="category">
      <a href="/index_category_category_ssh.html">
          ssh
      </a>
    </div>
    <div class="text">
      <p>TODO: 整理中
TODO: ssh config のメモとして整理しようと思う</p>
<div class="section" id="id1">
<div class="header_target" id="h_ssh_ssh_2dconfig_index_2erst_1"></div><h1>リファレンス</h1>
<p>ubuntu のやつ</p>
<ul class="simple">
<li><p><a class="reference external" href="http://manpages.ubuntu.com/manpages/bionic/en/man5/ssh_config.5.html">ssh_config</a></p></li>
</ul>
<p>種類やバージョンが選べるやつ</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.freebsd.org/cgi/man.cgi?query=ssh&amp;apropos=0&amp;sektion=0&amp;manpath=CentOS+6.5&amp;arch=default&amp;format=html">SSH(1)</a></p></li>
</ul>
<div class="section" id="id3">
<div class="header_target" id="h_ssh_ssh_2dconfig_index_2erst_2"></div><h2>~/.ssh/config</h2>
<p>ユーザごとの個人用設定ファイルです。ファイル形式は上で説明されています。このファイルは SSH クライアントによって使われます。このファイルは潜在的に悪用される危険性があるため、パーミッションは厳しくしておくのがいいでしょう。所有者のみが読み書き可能で、他からはアクセスできないようにしておくべきです。 |</p>
</div>
<div class="section" id="etc-ssh-ssh-config">
<div class="header_target" id="h_ssh_ssh_2dconfig_index_2erst_3"></div><h2>/etc/ssh/ssh_config</h2>
<p>システム全体にわたる設定ファイルです。このファイルはユーザの設定ファイルでは指定されなかった値を提供し、また設定ファイルを持たないユーザのためのデフォルトにもなります。このファイルは誰にでも読み込み可能でなければいけません。</p>
</div>
</div>
<div class="section" id="proxycommand">
<div class="header_target" id="h_ssh_ssh_2dconfig_index_2erst_4"></div><h1>ProxyCommand</h1>
<p>ローカルから、B へ ssh する</p>
<div class="code-block">
<div class="highlight"><pre><span></span>$ ssh-add ~/.ssh/id_rsa
$ ssh my-host

<span class="m">1</span>. まず、<span class="o">(</span><span class="m">1</span><span class="o">)</span> の <span class="sb">``</span>ssh -W %h:%p my-gateway<span class="sb">``</span> が実行される
<span class="m">2</span>. <span class="sb">``</span>$ ssh my-gateway<span class="sb">``</span> が実行される
  - HostName, User, IdentityFile は <span class="o">(</span><span class="m">3</span><span class="o">)</span> に記述のものが使用される
  -
<span class="m">3</span>. <span class="sb">``</span>my-gateway<span class="sb">``</span> から <span class="sb">``</span>$ ssh my-host<span class="sb">``</span> が実行される
  - <span class="sb">``</span>ForwardAgent yes<span class="sb">``</span> のため、 <span class="sb">``</span>IdentityFile<span class="sb">``</span> は、 <span class="o">(</span><span class="m">3</span><span class="o">)</span> で指定されたものが使用される
</pre></div>
</div>
<p><span class="docutils literal"><span class="pre">~/.ssh/config</span></span></p>
<blockquote>
<div class="code-block">
<div class="highlight"><pre><span></span><span class="gp">#</span> エージェント転送を行う
<span class="go">ForwardAgent yes</span>

<span class="gp">#</span> A: gateway
<span class="go">Host my-gateway                                 # (3)</span>
<span class="go">  HostName      my-gateway.com</span>
<span class="go">  User          my-user                         # (2)</span>
<span class="go">  IdentityFile  ~/.ssh/id_rsa</span>

<span class="gp">#</span> B: アプリケーションがデプロイしてあるサーバー
<span class="go">Host my-host</span>
<span class="go">  HostName      my-host-name</span>
<span class="go">  User          my-user                         # (2)</span>
<span class="go">  ProxyCommand  ssh -W %h:%p my-gateway         # (1)</span>
</pre></div>
</div>
</blockquote>
<ol class="arabic simple">
<li></li>
</ol>
<div class="section" id="id4">
<div class="header_target" id="h_ssh_ssh_2dconfig_index_2erst_5"></div><h2>キーワードやオプションの意味</h2>
<ul>
<li><p>ssh_config のマニュアルページの <span class="docutils literal">ProxyCommand</span> の説明</p>
<pre class="literal-block">Specifies the command to use to connect to the server.
The command string extends to the end of the line, and is executed with the user's shell.
In the command string, `%h' will be substituted by the host name to connect and `%p' by the port.
The command can be basically anything, and should read from its standard input and write to its standard output.</pre>
</li>
<li><p>ssh のマニュアルページの <span class="docutils literal"><span class="pre">-W</span></span> オプションの説明</p>
<pre class="literal-block">-W host:port
  Requests that standard input and output on the client be forwarded to host on port over the secure channel.</pre>
</li>
</ul>
</div>
<div class="section" id="id5">
<div class="header_target" id="h_ssh_ssh_2dconfig_index_2erst_6"></div><h2>参考</h2>
<ul class="simple">
<li><p><a class="reference external" href="http://note.crohaco.net/2017/ssh-tunnel/#proxycommand">ProxyCommand</a></p></li>
</ul>
</div>
</div>
<div class="section" id="forwardagent-yes">
<div class="header_target" id="h_ssh_ssh_2dconfig_index_2erst_7"></div><h1>ForwardAgent yes</h1>
<p>ForwardAgent (エージェント転送)
認証エージェントへの接続を、(それが存在する時は) リモートマシン上に転送するかどうかを指定します。この引数の値は"yes"あるいは"no"でなければならず、デフォルトは"no (エージェント転送をおこなわない)"です。
認証エージェントの転送には注意が必要です。リモートホスト上で (エージェントの UNIX ドメインソケットに対する)ファイルアクセス権限を無視できてしまうユーザがいる場合は、転送された接続を介してローカル側の認証エージェントにアクセスできてしまうことになります。攻撃側は認証エージェントから鍵そのものを盗むことはできませんが、認証エージェントがもっている鍵に認証をおこなわせることはできます。</p>
</div>
    </div>
  </main>
</div>
    </div>
  </body>

</html>